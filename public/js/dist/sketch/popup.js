function openIfPopup(e){if(e.classList.contains("popup")&&!e.classList.contains("open")){const t=e.cloneNode(!0);e.replaceWith(t),(e=t).querySelector(".popup-outter").addEventListener("click",(function(){this.closest(".popup").classList.remove("open")})),e.classList.add("open")}return e}function closeIfPopup(e){e.classList.contains("popup")&&e.classList.contains("open")&&e.classList.remove("open")}document.querySelectorAll(".popup .popup-outter").forEach((e=>{e.addEventListener("click",(function(){this.parentElement.classList.remove("open")}))}));const editFileInput=document.getElementById("editFileInput");editFileInput.addEventListener("change",(function(){document.querySelector("#editPopup").classList.remove("open");var e=new FormData;const t=editFileInput.closest(".popup").dataset.imageUuid,n=document.getElementById("gallery").dataset.sketchCode;emitUploadingImage(t,0),e.append(t,editFileInput.files[0]),axios.post(`/${n}/upload/${t}`,e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{const n=e.lengthComputable?e.total:e.target.getResponseHeader("content-length")||e.target.getResponseHeader("x-decompressed-content-length");if(null!==n){const o=Math.round(100*e.loaded/n);emitUploadingImage(t,o)}}}).then((e=>{if(e.data.done){const{uuid:t,path:n,version:o}=e.data;emitChangedImage(t,n,o)}}))}));